# Mac Mini Home Server Configuration
# Copy this file to .env.production and customize the values
# Optimized for Mac Mini deployment with Tailscale remote access

# =============================================================================
# Application Settings (Mac Mini Specific)
# =============================================================================

# Data directory - use your actual Mac user path
LUST_DATA_DIR=/Users/randylust/lust-rentals-tax-reporting/data

# Logging
LUST_LOG_LEVEL=INFO

# Server settings
# 0.0.0.0 allows Tailscale and local network access
# Use 127.0.0.1 if you only want localhost access
HOST=0.0.0.0
PORT=8002

# =============================================================================
# Security Settings
# =============================================================================

# Generate a secure API key:
# python3 -c "import secrets; print(secrets.token_urlsafe(32))"
API_SECRET_KEY=CHANGE_ME_GENERATE_SECURE_KEY

# Allowed origins (add your Tailscale hostname when you get it)
ALLOWED_ORIGINS=http://localhost:8002,http://127.0.0.1:8002,http://mac-mini.local:8002

# Rate limiting
RATE_LIMIT_PER_MINUTE=60

# =============================================================================
# Mac Mini Backup Configuration
# =============================================================================

# Primary backup - External drive (recommended)
# Connect an external drive and use it for backups
BACKUP_DIR=/Volumes/Backup/lust-rentals-backups

# Secondary backup - iCloud Drive (optional but recommended)
# Automatically syncs to cloud for off-site backup
BACKUP_CLOUD_DIR=/Users/randylust/Library/Mobile Documents/com~apple~CloudDocs/TaxBackups

# Local Time Machine backup (additional safety)
# Time Machine will backup everything automatically if enabled

# Backup settings
BACKUP_ENABLED=true
BACKUP_RETENTION_DAYS=90
BACKUP_ENCRYPT=true
BACKUP_PASSWORD=CHANGE_ME_BACKUP_PASSWORD

# =============================================================================
# Remote Access - Tailscale VPN (Recommended)
# =============================================================================

# After installing Tailscale, update these:
# Your Tailscale hostname will be like: mac-mini.tail12345.ts.net
TAILSCALE_HOSTNAME=

# Tailscale allows you to access your Mac from anywhere:
# http://mac-mini.tail12345.ts.net:8002

# =============================================================================
# Monitoring & Health Checks
# =============================================================================

# Enable monitoring
ENABLE_MONITORING=true
HEALTH_CHECK_INTERVAL=15

# Email alerts (optional - requires SMTP setup)
ALERT_EMAIL=your-email@example.com

# For Gmail SMTP (optional):
# 1. Enable 2FA on your Google account
# 2. Generate an "App Password" at https://myaccount.google.com/apppasswords
# 3. Use that app password below
SMTP_HOST=smtp.gmail.com
SMTP_PORT=587
SMTP_USER=your-email@gmail.com
SMTP_PASSWORD=your-gmail-app-password

# =============================================================================
# Database Settings
# =============================================================================

# SQLite with WAL mode for better concurrency
SQLITE_WAL_MODE=true

# =============================================================================
# macOS Specific Settings
# =============================================================================

# Auto-start on boot (managed by LaunchDaemon)
AUTO_START=true

# Run as your Mac user
RUN_AS_USER=randylust

# Process priority (0 = normal, negative = higher priority)
PROCESS_PRIORITY=0

# =============================================================================
# File Upload Settings
# =============================================================================

# Maximum upload size (MB)
MAX_UPLOAD_SIZE_MB=50

# Allowed file extensions
ALLOWED_EXTENSIONS=.csv

# =============================================================================
# Feature Flags
# =============================================================================

# Enable features
ENABLE_BULK_OPERATIONS=true
ENABLE_CSV_IMPORT=true
ENABLE_MULTI_YEAR_REPORTS=true
ENABLE_AUDIT_LOG=true

# =============================================================================
# Production Settings
# =============================================================================

# Disable debug features in production
DEBUG=false
AUTO_RELOAD=false

# Keep API docs enabled for easy access
ENABLE_DOCS=true

# Tax compliance - keep data for 7 years
DATA_RETENTION_DAYS=2555

# Enable audit logging
AUDIT_LOGGING_ENABLED=true

# =============================================================================
# Performance Tuning for Mac Mini
# =============================================================================

# Number of workers (recommended: number of CPU cores)
# M1/M2 Mac Mini typically has 8 cores
WORKERS=4

# Maximum concurrent requests
MAX_REQUESTS=100

# Request timeout (seconds)
REQUEST_TIMEOUT=300
